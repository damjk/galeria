{{#partial "contenido"}}
  
<div class="titulo">GOD OF WAR</div>
<div class=contenido-principal">

   <style>
    table {
      width: 100%;
      
      margin-top: 20px;
    }

    table, th, td {
     
    }

    img {
      width: 100%;
      height: auto;
    }

    #cambiarImagenes {
      margin-top: 10px;
      cursor: pointer;
    }
    
    
    
    
  </style>
  
  <style>
        body {
            text-align: center; /* Centrar elementos en el cuerpo de la página */
        }

        #mi-contenedor {
            margin-bottom: 20px; /* Añade espacio entre la tabla y los botones */
        }
    </style>
</head>
<body>



<!-- Contenedor donde se renderizará la tabla -->
<div id="mi-contenedor"></div>

<script>
var fotos = [];

{{#each fotos}}
    var nombre = '{{this.nombre}}';
    var imagen = '{{this.imagen}}';
    fotos.push({ nombre: nombre, imagen: imagen });
{{/each}}

    // Inicializa el índice de la tanda actual
    var currentTandaIndex = 0;

    // Función para mostrar la tabla de imágenes
    function mostrarTablaImagenes() {
        var contenedor = document.getElementById('mi-contenedor');
        contenedor.innerHTML = generarHTMLTabla();
    }

    // Función para generar el HTML de la tabla de imágenes
    function generarHTMLTabla() {
        var html = '<table id="tablaImagenes" class="mi-tabla" border="0" align="center">';

        for (var i = 0; i < 2; i++) {
            html += '<tr>';

            for (var j = 0; j < 2; j++) {
                var fotoIndex = currentTandaIndex * 4 + i * 2 + j;

                if (fotoIndex < fotos.length) {
                    html += `<td>${generarHTMLImagen(fotos[fotoIndex])}</td>`;
                }
            }

            html += '</tr>';
        }

        html += '</table>';
        return html;
    }

    // Función para generar el HTML de una imagen
    function generarHTMLImagen(foto) {
        return `
            <a href="#" onclick="ampliarImagen('data:image/png;base64,${foto.imagen}', '${foto.nombre}')">
                <img src="data:image/png;base64,${foto.imagen}" loading="lazy" alt="${foto.nombre}" width="500" height="500">
                <figcaption>${foto.nombre}</figcaption>
            </a>
        `;
    }

    // Función para avanzar a la siguiente tanda de imágenes
    function siguienteTanda() {
        currentTandaIndex = (currentTandaIndex + 1) % Math.ceil(fotos.length / 4);
        mostrarTablaImagenes();
    }

    // Función para retroceder a la tanda anterior de imágenes
    function tandaAnterior() {
        currentTandaIndex = (currentTandaIndex - 1 + Math.ceil(fotos.length / 4)) % Math.ceil(fotos.length / 4);
        mostrarTablaImagenes();
    }

    // Inicializa la página mostrando la tabla de imágenes
    mostrarTablaImagenes();
    
    
    
       var botonEstilo = 'margin: 5px;';

    // Botones "Siguiente Tanda" y "Tanda Anterior"
    var botonTandaAnterior = document.createElement('button');
    botonTandaAnterior.textContent = 'Tanda Anterior';
    botonTandaAnterior.setAttribute('style', botonEstilo);
    botonTandaAnterior.setAttribute('type', 'button');
    botonTandaAnterior.setAttribute('class', 'btn btn-secondary btn-lg');
    botonTandaAnterior.onclick = tandaAnterior;

    var botonSiguienteTanda = document.createElement('button');
    botonSiguienteTanda.textContent = 'Siguiente Tanda';
    botonSiguienteTanda.setAttribute('style', botonEstilo);
    botonSiguienteTanda.setAttribute('type', 'button');
    botonSiguienteTanda.setAttribute('class', 'btn btn-primary btn-lg');
    botonSiguienteTanda.onclick = siguienteTanda;

    // Inicializa la página mostrando la tabla de imágenes y los botones
    mostrarTablaImagenes();
    document.body.appendChild(botonTandaAnterior);
    document.body.appendChild(botonSiguienteTanda);
</script>

<!-- Botones "Siguiente Tanda" y "Tanda Anterior" -->



    
    <div class="imagen-ampliada" onclick="cerrarImagen()">
        <img id="imagenAmpliada" src="" alt="Imagen Ampliada">
    </div>

<script>
    var scrollPosition;

    function ampliarImagen(src, descripcion) {
        // Guardar la posición actual del scroll
        scrollPosition = window.scrollY;

        var imagenAmpliada = document.getElementById('imagenAmpliada');
        imagenAmpliada.src = src;
        imagenAmpliada.alt = descripcion;

        // Verificar si la imagen es vertical
        var img = new Image();
        img.src = src;
        img.onload = function() {
            var esVertical = img.height > img.width;

            // Establecer un ancho máximo solo si la imagen es vertical
            if (esVertical) {
                var anchoMaximo = window.innerWidth * 0.4; // Por ejemplo, el 80% del ancho de la ventana
                imagenAmpliada.style.maxWidth = anchoMaximo + 'px';
            } else {
                // Restaurar el ancho máximo si la imagen es horizontal
               
            }

            // Mostrar la imagen ampliada
            document.querySelector('.imagen-ampliada').style.display = 'flex';

            // Deshabilitar el scroll de la página mientras la imagen está ampliada
            document.body.style.overflow = 'hidden';
        };
    }

    function cerrarImagen() {
        // Restaurar la posición del scroll
        window.scrollTo(0, scrollPosition);

        var imagenAmpliada = document.getElementById('imagenAmpliada');
        imagenAmpliada.style.maxWidth = 'none';

        // Ocultar la imagen ampliada
        document.querySelector('.imagen-ampliada').style.display = 'none';

        // Habilitar nuevamente el scroll de la página
        document.body.style.overflow = 'visible';
    }
</script>
  
{{/partial}}
{{>layout.hbs}}

